<!DOCTYPE html>
<html>
<head>
    <style>
        /* é¡µé¢æ ‡é¢˜æ ·å¼ */
        .title {
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            margin: 20px 0;
        }

        .container {
            position: relative;
            width: 400px;
            margin: 50px auto;
            text-align: center;
        }

        .wheel {
            width: 320px;
            height: 320px;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            transition: transform 4s ease-out;
            margin: 0 auto;
        }

        .sector {
            position: absolute;
            width: 50%;
            height: 50%;
            transform-origin: bottom right;
            clip-path: polygon(100% 0, 100% 100%, 0 100%);
        }

        .pointer {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 40px;
            background-color: black;
            z-index: 2;
        }

        button {
            margin: 20px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }

        #history {
            list-style: none;
            padding: 0;
            max-width: 300px;
            margin: 20px auto;
        }
    </style>
</head>
<body>
    <!-- é¡µé¢æ ‡é¢˜ -->
    <div class="title">æˆ‘æ¥ç»™å‡ºå»ºè®®</div>

    <div class="container">
        <div class="wheel">
            <!-- æ‰‡åŒºç”±JavaScriptç”Ÿæˆ -->
        </div>
        <div class="pointer"></div>
        <button onclick="startSpin()">è½¬è½¬è½¬</button>
        <ul id="history"></ul>
    </div>

    <script>
        // åˆå§‹åŒ–è½¬ç›˜
        const wheel = document.querySelector('.wheel');
        const colors = ['#ff6666', '#66ff66', '#6666ff'];
        const sections = 18;
        let currentRotation = 0;
        let isSpinning = false;

        // å®šä¹‰é€‰é¡¹åç§°
        const options = [
            "äºŒåˆä¸€", "æˆ‘çˆ±å°ç‹—", "è¿é’è½¦", "å°å¸ƒä¸", "è“è‰²è´è¶", 
            "ç²‰è‰²å°é±¼äºº", "ç²‰è€ƒæ‹‰", "è–¯æ¡", "çŒ«è€³", "é‡é¤", 
            "è´è¶ç»“å…”å­", "å›°é¼ äº†", "æ¸…çˆ½å°çŒ«", "çª—æˆ·å°ç†Š", 
            "å¥½è¿è¿è¿", "æ´¾å¤§æ˜Ÿ", "å¤§å“¥å¤§","æ˜¥å¤©è˜‘è‡å±‹"
        ];

        // ä» LocalStorage åŠ è½½å†å²è®°å½•
        let historyData = JSON.parse(localStorage.getItem('lotteryHistory')) || [];

        // æ˜¾ç¤ºå†å²è®°å½•
        const historyElement = document.getElementById('history');
        function renderHistory() {
            historyElement.innerHTML = historyData
                .map(item => `<li>${item}</li>`)
                .join('');
        }
        function renderHistory() {
            historyElement.innerHTML = historyData
                .map(item => `<li>ğŸ‰ ${item}</li>`)
                .join('');
        }
        renderHistory();

        // ç”Ÿæˆæ‰‡åŒº
        for (let i = 0; i < sections; i++) {
            const sector = document.createElement('div');
            sector.className = 'sector';
            sector.style.transform = `rotate(${i * (360 / sections)}deg)`;
            sector.style.backgroundColor = colors[i % 3];
            wheel.appendChild(sector);
        }

        function startSpin() {
            if (isSpinning) return;
            isSpinning = true;
            
            // éšæœºé€‰æ‹©åŒºåŸŸï¼ˆ0-16ï¼‰
            const selected = Math.floor(Math.random() * sections);
            
            // è®¡ç®—ç›®æ ‡è§’åº¦ï¼ˆå¢åŠ 5åœˆæ—‹è½¬æ•ˆæœï¼‰
            const degreesPerSection = 360 / sections;
            const targetRotation = currentRotation + 5 * 360 + selected * degreesPerSection + degreesPerSection/2;
            
            // åº”ç”¨æ—‹è½¬åŠ¨ç”»
            wheel.style.transition = 'transform 4s ease-out';
            wheel.style.transform = `rotate(${targetRotation}deg)`;
            
            currentRotation = targetRotation;
        }

        // ç›‘å¬åŠ¨ç”»ç»“æŸ
        wheel.addEventListener('transitionend', () => {
            isSpinning = false;
            wheel.style.transition = 'none';
            
            // è®¡ç®—å®é™…ä¸­å¥–åŒºåŸŸ
            const finalRotation = currentRotation % 360;
            const degreesPerSection = 360 / sections;
            const adjustedRotation = (finalRotation - degreesPerSection/2 + 360) % 360;
            const result = Math.floor(adjustedRotation / degreesPerSection);
            
            // è·å–å½“å‰æ—¶é—´
            const now = new Date();
            const month = String(now.getMonth() + 1).padStart(2, '0'); // è¡¥é›¶
            const day = String(now.getDate()).padStart(2, '0'); // è¡¥é›¶
            const hours = String(now.getHours()).padStart(2, '0'); // è¡¥é›¶
            const minutes = String(now.getMinutes()).padStart(2, '0'); // è¡¥é›¶

            // æ ¼å¼åŒ–æ—¶é—´
            const timeString = `${month}æœˆ${day}æ—¥ ${hours}:${minutes}`;
            
            // æ·»åŠ ä¸­å¥–è®°å½•
            const record = `æŠ½åˆ°äº†ï¼š${options[result]}ï¼ˆ${timeString}ï¼‰`;
            historyData.unshift(record); // æ·»åŠ åˆ°æ•°ç»„å¼€å¤´
            localStorage.setItem('lotteryHistory', JSON.stringify(historyData)); // ä¿å­˜åˆ° LocalStorage
            renderHistory(); // æ›´æ–°é¡µé¢æ˜¾ç¤º
        });
    </script>
</body>
</html>